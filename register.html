<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="login/assets/img/apple-icon.png"
    />
    <link rel="icon" type="image/png" href="login/assets/img/ploutos.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Register</title>
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no"
      name="viewport"
    />
    <!-- <link href="login/other/logos.png" rel="shortcut icon" /> -->
 
    <link rel="stylesheet" href="login/assets/css/login.css" />
    <link href="login/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="login/assets/css/now-ui-kit.css?v=1.1.0" rel="stylesheet" />
    <link href="login/assets/css/demo.css" rel="stylesheet" />
    <link rel="stylesheet" href="login/alert/css/alert.min.css" />
    <link rel="stylesheet" href="login/alert/css/alert.ani.min.css" />
    <link rel="canonical" href="" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link
    href="login/assets/css/jquery.toast.css"
    rel="stylesheet"
  />
    <script src="login/assets/js/jquery.min.js?v=1.1.2" ></script>
    <script src="login/assets/js/jquery.toast.min.js?v=1.1.2" ></script> 
    <style>
      .user_name_style {
        width: 20px !important;
        height: 20px !important;
      }
    </style>
  </head>

  <body class="login-page sidebar-collapse" style="overflow-y: scroll">
    <div class="page-header" filter-color="orange">
      <div
        class="page-header-image"
        style="background-image: url(assets/bjing.jpeg)"
      ></div>
      <div class="container">
        <div class="col-md-4 content-center">
          <div class="card card-login card-plain">
            <form class="form" method="" action="">
              <div class="header header-primary text-center">
                <div
                  class="logo-container"
                  style="margin-bottom: 25px; margin-top: 60px"
                >
                  <img
                    style="border-radius: 15px"
                    src="login/assets/img/ploutos.png"
                    alt=""
                  />
                </div>
              </div>
              <div class="content">
                <div class="input-group form-group-no-border input-lg">
                  <span class="input-group-addon">
                    <img
                      class="user_name_style"
                      src="login/other/user_name.png"
                      alt=""
                      srcset=""
                    />
                  </span>
                  <input
                    type="text"
                    id="username"
                    class="form-control"
                    placeholder="Name"
                  />
                </div>
                <div class="input-group form-group-no-border input-lg">
                  <span class="input-group-addon">
                    <img
                      class="user_name_style"
                      src="login/other/email.png"
                      alt=""
                      srcset=""
                    />
                  </span>
                  <input
                    type="text"
                    placeholder="Email"
                    id="email"
                    class="form-control"
                  />
                </div>
                <div class="input-group form-group-no-border input-lg">
                  <span class="input-group-addon">
                    <img
                      class="user_name_style"
                      src="login/other/phone.png"
                      alt=""
                      srcset=""
                    />
                  </span>
                  <select
                    name=""
                    id="s1"
                    class="form-control"
                    style="height: 50px; padding: 0; max-width: 63px"
                  ></select>
                  <span id="codeInit" style="    background-color: rgba(255, 255, 255, 0.1);line-height:50px;height: 50px;"></span>
                  <input
                    type="text"
                    id="phone"
                    placeholder="Telephone"
                    class="form-control"
                  />
                </div>

                <div class="input-group form-group-no-border input-lg">
                  <span class="input-group-addon">
                    <img
                      class="user_name_style"
                      src="login/other/code.png"
                      alt=""
                      srcset=""
                    />
                  </span>

                  <input
                    type="text"
                    id="code"
                    placeholder="Code"
                    class="form-control"
                  />
                  <button
                    class="btn_yzmbutton"
                    style="
                      border: none;
                      cursor: pointer;
                      color: #fff;
                      background-color: orange;
                      min-width: 120px;
                      border-top-right-radius: 25px;
                      border-bottom-right-radius: 25px;
                    "
                  >
                    Get Code
                  </button>
                </div>
                <div class="input-group form-group-no-border input-lg">
                  <span class="input-group-addon">
                    <img
                      class="user_name_style"
                      src="login/other/possword.png"
                      alt=""
                      srcset=""
                    />
                  </span>
                  <input
                    type="text"
                    id="password"
                    placeholder="Password"
                    class="form-control"
                  />
                </div>
                <div class="input-group form-group-no-border input-lg">
                  <span class="input-group-addon">
                    <img
                      class="user_name_style"
                      src="login/other/possword.png"
                      alt=""
                      srcset=""
                    />
                  </span>
                  <input
                    type="text"
                    placeholder="Confirm Possword"
                    id="rePassword"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="footer text-center">
                <a
                  href="javascript:;"
                  id="registerBtn"
                  class="btn btn-primary btn-round btn-lg btn-block"
                  style="cursor: pointer"
                  >Register</a
                >
              </div>
              <div class="pull-left">
                <h6>
                  <a href="javascript:;" class="link"></a>
                </h6>
              </div>
              <div class="pull-right">
                <h6>
                  <a href="login.html" class="link">Login In</a>
                </h6>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- <footer class="footer">
        <div class="container">
          <nav>
            <ul>
              <li>
                <a href="#"> Creative Tim </a>
              </li>
              <li>
                <a href="#"> About Us </a>
              </li>
              <li>
                <a href="#"> Blog </a>
              </li>
              <li>
                <a href="#"> MIT License </a>
              </li>
            </ul>
          </nav>
        </div>
      </footer> -->
    </div>
  </body>
  <!--   Core JS Files   -->
  <script src="login/alert/js/alert.min.js"></script>
  <script
    src="login/assets/js/core/jquery.3.2.1.min.js"
    type="text/javascript"
  ></script>
  <script
    src="login/assets/js/core/popper.min.js"
    type="text/javascript"
  ></script>
  <script
    src="login/assets/js/core/bootstrap.min.js"
    type="text/javascript"
  ></script>
  <script src="login/assets/js/plugins/bootstrap-switch.js"></script>
  <script
    src="login/assets/js/plugins/nouislider.min.js"
    type="text/javascript"
  ></script>
  <script
    src="login/assets/js/plugins/bootstrap-datepicker.js"
    type="text/javascript"
  ></script>
  <script
    src="login/assets/js/plugins/jquery.sharrre.js"
    type="text/javascript"
  ></script>
  <script
    src="login/assets/js/now-ui-kit.js?v=1.1.0"
    type="text/javascript"
  ></script>
  <!-- <script
    src="login/assets/js/login.js?v=1.1.0"
    type="text/javascript"
  ></script> -->

  <script>
    (function ($) {
      var baseUrl = "https://api.stock-plouto.com";
      // var baseUrl =   "http://192.168.1.11:8080"

      var userInfo = localStorage.getItem("userInfo");
      var _tempPosition = "center";
      var areaCode = "";
      var codeLists = [];
      $("#s1").change(function () {
        var areaCodes = $("#s1  option:selected").text();

        $.each(codeLists, function (index, data) {
          if (data.title == areaCodes) {
            areaCode = data.value;

          }
        });
        $("#codeInit").text(areaCode)
      });
      $(".btn_yzmbutton").click(function () {
        var obj = $(".btn_yzmbutton");
        getCodes(obj);
        countdown(obj);
      });
      (function () {
        $.ajax({
          type: "get",
          url: `${baseUrl}/noauth/getareacode`,
          dataType: "json",
          success: function (res) {
            codeLists = res.data.list;
            console.log("======>", res);
            areaCode = res.data.list[0].value;
            $("#codeInit").text(areaCode)
            $.each(res.data.list, function (index, data) {
              var op21 = `<option style="color:#FFF;background-color: black;" value="${data.value}">${data.title}</option>`;
              $("#s1").append(op21);
            });
            // window.location.href = "login.html";
          },
        });
      })();

      $("#registerBtn").click(function () {
        var registerUser = {
          username: $("#username").val(),
          password: $("#password").val(),
          rePassword: $("#rePassword").val(),
          email: $("#email").val(),
          phone: $("#phone").val(),
          code: $("#code").val(),
          areacode: areaCode,
        };   
        if ($("#username").val() == "" ) {
          fnShowAnimate("zoom-in", "Username can not be empty");
          return;
        }
        if ($("#phone").val() == "" ) {
          fnShowAnimate("zoom-in", "Enter phone number");
          return;
        }
        if ($("#email").val() == "" ) {
          fnShowAnimate("zoom-in", "Enter email");
          return;
        }
       
        if ($("#code").val() == "" ) {
          fnShowAnimate("zoom-in", "please enter verification code");
          return;
        }  
        if ($("#password").val()  == "") {
          fnShowAnimate("zoom-in", "Please enter the verification password");
          return;
        }
        if ($("#rePassword").val() == "" ) {
          fnShowAnimate("zoom-in", "Confirm password is incorrect");
          return;
        }
        if ($("#password").val() != $("#rePassword").val() ) {
          fnShowAnimate("zoom-in", "Please check that the password is always");
          return;
        }
        var emailRegExp = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
        var ok = emailRegExp.test($("#email").val());

        if (ok) {
        } else {
          // 输入的格式不符合要求
          fnShowAnimate("zoom-in", "Error email");
          return;
        }

        // console.log("注册参数2", registerUser);
        $.ajax({
          type: "post",
          url: `${baseUrl}/auth/register`,
          data: registerUser,
          dataType: "json",
          success: function (res) {
            if (res.code == 0) {
              window.location.href = "login.html";
            } else {
              fnShowAnimate("zoom-in", res.msg);
            }
            // console.log("======>", res);
            // window.location.href = "login.html";
          },
        });
      });

      function countdown(obj) {
        if (time == 0) {
          obj.attr("disabled", false);
          obj.html("Get Code");
          time = 60;
          return;
        } else {
          obj.attr("disabled", true);
          obj.html(time + "s");
          time--;
        }
        setTimeout(function () {
          countdown(obj);
        }, 1000);
      }
      var time = 60;
      function getCodes(obj) {
        var phones = $("#phone").val();
        if (phones == "") {
          obj.attr("disabled", false);
          obj.html("Get Code");
          fnShowAnimate("zoom-in", "Telephone error");
          return;
        }
        $.ajax({
          type: "get",
          url: `${baseUrl}/noauth/getcode?phone=${phones}&areacode=${areaCode}`,
          dataType: "json",
          success: function (res) {},
        });
      }
      // 第三步：初始化插件
  const tzAlert = new TzAlert({
    id: "alert1",
    center: true, // 内容居中
    useEscClose: false,
    useInitShow: false, // 实例化完成直接显示
    useMaskClose: true,
    title: {
      html: "",
      color: "#ff80ab",
      fontSize: "18px",
    },
    mask: {
      use: true,
      background: "rgba(0,0,0,.6)",
    },
    //  html: 默认双击内容部分即可复制
    tips: {
      html: "",
    },
    content: {
      html: "message",
    },
    onEvents: function (e) {
      var ctx = e.ctx,
        cancel = e.cancel,
        confirm = e.confirm;
      if (e.cancel) {
        tzAlert.close();
        e.ctx.close();
      } else if (e.confirm) {
      }
    },
    onMounted: function () {},
  });
      // 动画显示https://www.jq22.com/jquery-info24247
      function fnShowAnimate(animate, content) {
        tzAlert.open({
          position: _tempPosition,
          animate: animate,
          maskClose: true,
          width: "300px",
          mask: {
            use: true,
            background: "rgba(0,0,0,.6)",
          },
          cancel: {
            use: false,
          },
          confirm: {
            use: false,
          },
          content: {
            html: content,
          },
        });
      }
    })(jQuery);
  </script>
  <script>
    !function(p){"use strict";!function(t){var s=window,e=document,i=p,c="".concat("https:"===e.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=e.createElement("script"),r=e.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=c,n.id="LA_COLLECT",i.d=n;var o=function(){s.LA.ids.push(i)};s.LA?s.LA.ids&&o():(s.LA=p,s.LA.ids=[],o()),r.parentNode.insertBefore(n,r)}()}({id:"Jj9lqYbuaJWdfWUh",ck:"Jj9lqYbuaJWdfWUh"});
   </script>
</html>
